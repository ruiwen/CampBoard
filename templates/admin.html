{% extends "base.html" %}

{% block js %}
	<script>
		CampBoard.Admin = CampBoard.Admin || {};

		CampBoard.Admin.SessionAdd = function() {
			// Grab session
			var sess = $('#session-add').val();
		
			CampBoard.send_message('session_add', null, sess);
			$('#session-add').val('');
		}
		
		CampBoard.Admin.SessionRemove = function() {
			// Grab session 
			var sess = $('#session-remove').val();
		
			CampBoard.send_message('session_remove', null, sess);
			$('#session-remove').val('');
		}
		
		CampBoard.Admin.MessageBroadcast = function() {
			// Grab the selected channel
			var channel = $('#admin-broadcast-channel option:selected').val();
		
			// What's the message
			var msg = $('#message-broadcast').val();
					
			CampBoard.send_message('broadcast_message', channel, msg);
			
			$('#message-broadcast').val('');
		}
	</script>
{% end %}

{% block main %}
	<div id="admin-stats">
		<h1>Admin</h1>
		<ul id="admin-stats-list" class="stats-list">
			<li><h2><span class="admin-stats stats-label">Total tweeters</span></h2> <span id="total-tweets" class="stats-value">0</span></li>
			<li><h2><span  class="admin-stats stats-label">Unique tweeters</span></h2> <span id="unique-tweeters" class="stats-value">0</span></li>
			<li><h2><span  class="admin-stats stats-label">Total sessions</span></h2> <span id="total-sessions" class="stats-value">0</span></li>
		</ul>
	</div>
	
	<div id="admin-sessions">
		<h1>Sessions</h1>
		<ul id="session-stats-list" class="stats-list">
			<li class="placeholder">None yet.</li>
		</ul>
	</div>
	
	<div id="admin-controls">
		<h1>Controls</h1>
		<ul>
			<li><form onsubmit="CampBoard.Admin.SessionAdd(); return false;"><input type="text" placeholder="Add session?" id="session-add"><input type='submit' value="+"></li></form>
			<li><form onsubmit="CampBoard.Admin.SessionRemove(); return false;"><input type="text" placeholder="Remove session?" id="session-remove"><input type='submit' value='-'></li></form>
			<li>
				<form onsubmit="CampBoard.Admin.MessageBroadcast(); return false;">
				<input type="text" placeholder="Broadcast message" id="message-broadcast"><input type='submit' value='!'>
				<br>
				<select id="admin-broadcast-channel">
					<option value="all">All</option>
					{% for sess in sessions %}
					<option value="{{ sess }}">{{ sess }}</option>
					{% end %}
				</select>
				</form>
			</li>
		</ul>
	</div>

{% end %}